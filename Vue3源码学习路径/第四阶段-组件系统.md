# ç¬¬å››é˜¶æ®µï¼šç»„ä»¶ç³»ç»Ÿ

## ğŸ¯ é˜¶æ®µç›®æ ‡
æ·±å…¥ç†è§£Vue 3ç»„ä»¶ç³»ç»Ÿçš„è®¾è®¡åŸç†ï¼ŒæŒæ¡ç»„ä»¶å®ä¾‹ã€ç”Ÿå‘½å‘¨æœŸã€propsã€äº‹ä»¶ã€æ’æ§½ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œç†è§£ç»„ä»¶é€šä¿¡å’ŒçŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚

## ğŸ” æ ¸å¿ƒé—®é¢˜

### é—®é¢˜1ï¼šç»„ä»¶å®ä¾‹æ˜¯å¦‚ä½•åˆ›å»ºå’Œç®¡ç†çš„ï¼Ÿ
**å­¦ä¹ é‡ç‚¹ï¼š**
- ç»„ä»¶å®ä¾‹çš„æ•°æ®ç»“æ„è®¾è®¡
- ç»„ä»¶çš„åˆ›å»ºã€åˆå§‹åŒ–æµç¨‹
- ç»„ä»¶å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†

**å®è·µä»»åŠ¡ï¼š**
```javascript
// è®¾è®¡ç»„ä»¶å®ä¾‹ç»“æ„
function createComponentInstance(vnode, parent) {
  const instance = {
    // åŸºæœ¬ä¿¡æ¯
    uid: instanceCount++,
    vnode,
    parent,
    root: parent ? parent.root : null,
    
    // ç»„ä»¶ç›¸å…³
    type: vnode.type,
    setupState: {},
    props: {},
    attrs: {},
    slots: {},
    
    // æ¸²æŸ“ç›¸å…³
    render: null,
    subTree: null,
    update: null,
    
    // ç”Ÿå‘½å‘¨æœŸ
    isMounted: false,
    isUnmounted: false,
    bc: null,  // beforeCreate
    c: null,   // created
    bm: null,  // beforeMount
    m: null,   // mounted
    bu: null,  // beforeUpdate
    u: null,   // updated
    bum: null, // beforeUnmount
    um: null,  // unmounted
    
    // å…¶ä»–
    scope: null,
    asyncDep: null,
    asyncResolved: false
  }
  
  // æ€è€ƒï¼šç»„ä»¶å®ä¾‹éœ€è¦åŒ…å«å“ªäº›æ ¸å¿ƒä¿¡æ¯ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•è®¾è®¡ç»„ä»¶å®ä¾‹çš„å±‚çº§å…³ç³»ï¼Ÿ
  return instance
}
```

### é—®é¢˜2ï¼šsetupå‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
**å­¦ä¹ é‡ç‚¹ï¼š**
- setupå‡½æ•°çš„è°ƒç”¨æ—¶æœºå’Œå‚æ•°
- setupä¸Šä¸‹æ–‡çš„è®¾è®¡
- setupè¿”å›å€¼çš„å¤„ç†

**å®è·µä»»åŠ¡ï¼š**
```javascript
// å®ç°setupå‡½æ•°çš„è°ƒç”¨
function setupComponent(instance) {
  const { type: component, props, children } = instance.vnode
  
  // 1. åˆå§‹åŒ–props
  initProps(instance, props)
  
  // 2. åˆå§‹åŒ–slots
  initSlots(instance, children)
  
  // 3. è®¾ç½®æœ‰çŠ¶æ€ç»„ä»¶
  setupStatefulComponent(instance)
}

function setupStatefulComponent(instance) {
  const component = instance.type
  const { setup } = component
  
  if (setup) {
    // è®¾ç½®å½“å‰å®ä¾‹
    setCurrentInstance(instance)
    
    // åˆ›å»ºsetupä¸Šä¸‹æ–‡
    const setupContext = {
      attrs: instance.attrs,
      slots: instance.slots,
      emit: (event, ...args) => {
        // æ€è€ƒï¼šå¦‚ä½•å®ç°äº‹ä»¶å‘å°„ï¼Ÿ
        const handler = instance.vnode.props[`on${capitalize(event)}`]
        if (handler) {
          handler(...args)
        }
      },
      expose: (exposed) => {
        // æ€è€ƒï¼šå¦‚ä½•å®ç°ç»„ä»¶å®ä¾‹çš„æš´éœ²ï¼Ÿ
        instance.exposed = exposed
      }
    }
    
    // è°ƒç”¨setupå‡½æ•°
    const setupResult = setup(instance.props, setupContext)
    
    // æ¸…é™¤å½“å‰å®ä¾‹
    setCurrentInstance(null)
    
    // å¤„ç†setupè¿”å›å€¼
    handleSetupResult(instance, setupResult)
  }
}

function handleSetupResult(instance, setupResult) {
  // æ€è€ƒï¼šsetupå¯èƒ½è¿”å›ä»€ä¹ˆç±»å‹çš„å€¼ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†è¿”å›å‡½æ•°ï¼ˆrenderå‡½æ•°ï¼‰çš„æƒ…å†µï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†è¿”å›å¯¹è±¡ï¼ˆçŠ¶æ€å’Œæ–¹æ³•ï¼‰çš„æƒ…å†µï¼Ÿ
}
```

### é—®é¢˜3ï¼šPropsç³»ç»Ÿæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
**å­¦ä¹ é‡ç‚¹ï¼š**
- Propsçš„å£°æ˜å’ŒéªŒè¯
- Propsçš„å“åº”å¼å¤„ç†
- Propsçš„é»˜è®¤å€¼å’Œç±»å‹æ£€æŸ¥

**å®è·µä»»åŠ¡ï¼š**
```javascript
// å®ç°Propsç³»ç»Ÿ
function initProps(instance, rawProps) {
  const props = {}
  const attrs = {}
  const options = instance.type.props
  
  if (rawProps) {
    for (const key in rawProps) {
      const value = rawProps[key]
      
      // æ€è€ƒï¼šå¦‚ä½•åŒºåˆ†propså’Œattrsï¼Ÿ
      if (options && hasOwn(options, key)) {
        props[key] = value
      } else {
        attrs[key] = value
      }
    }
  }
  
  // æ€è€ƒï¼šå¦‚ä½•è®©propså…·æœ‰å“åº”å¼ï¼Ÿ
  instance.props = reactive(props)
  instance.attrs = attrs
}

// Propsé€‰é¡¹çš„å¤„ç†
function normalizePropsOptions(comp) {
  // æ”¯æŒæ•°ç»„å½¢å¼ï¼šprops: ['name', 'age']
  // æ”¯æŒå¯¹è±¡å½¢å¼ï¼šprops: { name: String, age: Number }
  // æ”¯æŒè¯¦ç»†å½¢å¼ï¼šprops: { 
  //   name: { type: String, required: true, default: '' }
  // }
  
  // æ€è€ƒï¼šå¦‚ä½•ç»Ÿä¸€å¤„ç†ä¸åŒçš„propså£°æ˜æ–¹å¼ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å®ç°ç±»å‹æ£€æŸ¥å’Œé»˜è®¤å€¼ï¼Ÿ
}

function validateProps(props, comp) {
  const options = comp.props
  if (!options) return
  
  for (const key in options) {
    const option = options[key]
    const value = props[key]
    
    // æ€è€ƒï¼šå¦‚ä½•å®ç°requiredæ£€æŸ¥ï¼Ÿ
    // æ€è€ƒï¼šå¦‚ä½•å®ç°ç±»å‹æ£€æŸ¥ï¼Ÿ
    // æ€è€ƒï¼šå¦‚ä½•å®ç°è‡ªå®šä¹‰éªŒè¯å™¨ï¼Ÿ
  }
}
```

### é—®é¢˜4ï¼šäº‹ä»¶ç³»ç»Ÿæ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ
**å­¦ä¹ é‡ç‚¹ï¼š**
- äº‹ä»¶çš„å‘å°„å’Œç›‘å¬æœºåˆ¶
- äº‹ä»¶ä¿®é¥°ç¬¦çš„å¤„ç†
- è‡ªå®šä¹‰äº‹ä»¶vsåŸç”Ÿäº‹ä»¶

**å®è·µä»»åŠ¡ï¼š**
```javascript
// å®ç°äº‹ä»¶ç³»ç»Ÿ
function emit(instance, event, ...args) {
  const props = instance.vnode.props
  
  // è½¬æ¢äº‹ä»¶åï¼šupdate:modelValue -> onUpdate:modelValue
  let handlerName = `on${capitalize(event)}`
  let handler = props[handlerName]
  
  // æ”¯æŒ onUpdateModelValue çš„å‘½åæ–¹å¼
  if (!handler && event.startsWith('update:')) {
    handlerName = `on${capitalize(camelize(event))}`
    handler = props[handlerName]
  }
  
  if (handler) {
    callWithAsyncErrorHandling(handler, instance, args)
  }
  
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†äº‹ä»¶ä¿®é¥°ç¬¦ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å®ç°.onceä¿®é¥°ç¬¦ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†v-modelçš„åŒå‘ç»‘å®šï¼Ÿ
}

// v-modelçš„å®ç°
function withModel(tag, props, getter, setter) {
  // æ€è€ƒï¼šv-modelæ˜¯å¦‚ä½•è½¬æ¢ä¸ºpropså’Œäº‹ä»¶çš„ï¼Ÿ
  // <input v-model="value" /> 
  // è½¬æ¢ä¸ºï¼š<input :value="value" @input="value = $event.target.value" />
  
  if (tag === 'input') {
    return {
      ...props,
      value: getter(),
      onInput: (e) => setter(e.target.value)
    }
  }
  
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†ä¸åŒå…ƒç´ çš„v-modelï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶çš„v-modelï¼Ÿ
}
```

### é—®é¢˜5ï¼šæ’æ§½ç³»ç»Ÿæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
**å­¦ä¹ é‡ç‚¹ï¼š**
- æ’æ§½çš„ç¼–è¯‘å’Œè¿è¡Œæ—¶å¤„ç†
- ä½œç”¨åŸŸæ’æ§½çš„å®ç°åŸç†
- å…·åæ’æ§½å’Œé»˜è®¤æ’æ§½

**å®è·µä»»åŠ¡ï¼š**
```javascript
// å®ç°æ’æ§½ç³»ç»Ÿ
function initSlots(instance, children) {
  if (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {
    normalizeObjectSlots(children, (instance.slots = {}))
  } else {
    instance.slots = {}
    if (children) {
      normalizeVNodeSlot(instance.slots, 'default', children)
    }
  }
}

function normalizeObjectSlots(children, slots) {
  for (const key in children) {
    const value = children[key]
    if (isFunction(value)) {
      // ä½œç”¨åŸŸæ’æ§½
      slots[key] = (props) => normalizeSlotValue(value(props))
    } else {
      // æ™®é€šæ’æ§½
      slots[key] = () => normalizeSlotValue(value)
    }
  }
}

// æ¸²æŸ“æ’æ§½
function renderSlot(slots, name, props = {}, fallback) {
  const slot = slots[name]
  
  if (slot) {
    // æ€è€ƒï¼šå¦‚ä½•å°†ä½œç”¨åŸŸæ•°æ®ä¼ é€’ç»™æ’æ§½ï¼Ÿ
    return normalizeVNode(slot(props))
  } else if (fallback) {
    return normalizeVNode(fallback())
  }
  
  // æ€è€ƒï¼šå¦‚ä½•å®ç°æ’æ§½çš„æ‡’è®¡ç®—ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†åŠ¨æ€æ’æ§½åï¼Ÿ
}

// ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†æ’æ§½
function compileSlot(node, context) {
  // <template v-slot:header="{ user }">
  //   <h1>{{ user.name }}</h1>
  // </template>
  
  // ç¼–è¯‘ä¸ºï¼š
  // {
  //   header: ({ user }) => h('h1', user.name)
  // }
  
  // æ€è€ƒï¼šç¼–è¯‘å™¨å¦‚ä½•è¯†åˆ«æ’æ§½ï¼Ÿ
  // æ€è€ƒï¼šå¦‚ä½•å¤„ç†æ’æ§½çš„ä½œç”¨åŸŸå˜é‡ï¼Ÿ
}
```

### é—®é¢˜6ï¼šç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
**å­¦ä¹ é‡ç‚¹ï¼š**
- ç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨æ—¶æœº
- ç”Ÿå‘½å‘¨æœŸé’©å­çš„æ³¨å†Œæœºåˆ¶
- çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåº

**å®è·µä»»åŠ¡ï¼š**
```javascript
// å®ç°ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿ
const LifecycleHooks = {
  BEFORE_CREATE: 'bc',
  CREATED: 'c',
  BEFORE_MOUNT: 'bm',
  MOUNTED: 'm',
  BEFORE_UPDATE: 'bu',
  UPDATED: 'u',
  BEFORE_UNMOUNT: 'bum',
  UNMOUNTED: 'um'
}

function injectHook(type, hook, target = currentInstance) {
  if (target) {
    const hooks = target[type] || (target[type] = [])
    
    // åŒ…è£…é’©å­å‡½æ•°ï¼Œå¤„ç†é”™è¯¯
    const wrappedHook = (...args) => {
      // è®¾ç½®å½“å‰å®ä¾‹
      setCurrentInstance(target)
      try {
        return hook(...args)
      } catch (err) {
        handleError(err, target, `${type} hook`)
      } finally {
        setCurrentInstance(null)
      }
    }
    
    hooks.push(wrappedHook)
  }
}

// ç”Ÿå‘½å‘¨æœŸAPI
export const onBeforeMount = (hook) => injectHook(LifecycleHooks.BEFORE_MOUNT, hook)
export const onMounted = (hook) => injectHook(LifecycleHooks.MOUNTED, hook)
// ... å…¶ä»–é’©å­

// è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­
function invokeArrayFns(fns, arg) {
  for (let i = 0; i < fns.length; i++) {
    fns[i](arg)
  }
}

// åœ¨ç»„ä»¶æŒ‚è½½æ—¶è°ƒç”¨
function mountComponent(vnode, container, anchor) {
  const instance = createComponentInstance(vnode)
  setupComponent(instance)
  
  // è®¾ç½®æ¸²æŸ“å‰¯ä½œç”¨
  setupRenderEffect(instance, vnode, container, anchor)
}

function setupRenderEffect(instance, vnode, container, anchor) {
  instance.update = effect(() => {
    if (!instance.isMounted) {
      // è°ƒç”¨beforeMounté’©å­
      if (instance.bm) {
        invokeArrayFns(instance.bm)
      }
      
      // æ¸²æŸ“ç»„ä»¶
      const subTree = instance.render()
      patch(null, subTree, container, anchor)
      instance.subTree = subTree
      instance.isMounted = true
      
      // è°ƒç”¨mountedé’©å­ï¼ˆnextTickï¼‰
      if (instance.m) {
        queuePostFlushCb(() => invokeArrayFns(instance.m))
      }
    } else {
      // æ›´æ–°é€»è¾‘...
    }
  })
}

// æ€è€ƒï¼šä¸ºä»€ä¹ˆmountedé’©å­è¦åœ¨nextTickä¸­è°ƒç”¨ï¼Ÿ
// æ€è€ƒï¼šçˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ
```

## ğŸ“– ç†è®ºå­¦ä¹ èµ„æº

### Vue 3å®˜æ–¹æ–‡æ¡£
- [ç»„ä»¶åŸºç¡€](https://cn.vuejs.org/guide/essentials/component-basics.html)
- [ç»„ä»¶æ³¨å†Œ](https://cn.vuejs.org/guide/components/registration.html)
- [Props](https://cn.vuejs.org/guide/components/props.html)
- [äº‹ä»¶](https://cn.vuejs.org/guide/components/events.html)
- [æ’æ§½](https://cn.vuejs.org/guide/components/slots.html)
- [ç”Ÿå‘½å‘¨æœŸ](https://cn.vuejs.org/guide/essentials/lifecycle.html)

### æ¨èé˜…è¯»æºç ä½ç½®
```
vue-next/packages/runtime-core/src/
â”œâ”€â”€ component.ts           # ç»„ä»¶å®ä¾‹å’Œç”Ÿå‘½å‘¨æœŸ
â”œâ”€â”€ componentProps.ts      # Propsç³»ç»Ÿ
â”œâ”€â”€ componentSlots.ts      # æ’æ§½ç³»ç»Ÿ
â”œâ”€â”€ componentEmits.ts      # äº‹ä»¶ç³»ç»Ÿ
â”œâ”€â”€ apiLifecycle.ts        # ç”Ÿå‘½å‘¨æœŸAPI
â””â”€â”€ apiSetupHelpers.ts     # setupè¾…åŠ©å‡½æ•°
```

### å…³é”®æ¦‚å¿µæ¢³ç†
1. **ç»„ä»¶å®ä¾‹** - ç»„ä»¶çš„è¿è¡Œæ—¶è¡¨ç¤ºï¼ŒåŒ…å«çŠ¶æ€ã€æ–¹æ³•ã€ç”Ÿå‘½å‘¨æœŸç­‰
2. **Props** - çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„æœºåˆ¶
3. **äº‹ä»¶** - å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡çš„æœºåˆ¶
4. **æ’æ§½** - å†…å®¹åˆ†å‘çš„æœºåˆ¶ï¼Œå…è®¸ç»„åˆç»„ä»¶
5. **ç”Ÿå‘½å‘¨æœŸ** - ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯è¿‡ç¨‹ä¸­çš„å…³é”®æ—¶é—´ç‚¹

## ğŸ› ï¸ å®è·µä»»åŠ¡æ¸…å•

- [ ] å®ç°ç»„ä»¶å®ä¾‹çš„åˆ›å»ºå’Œç®¡ç†
- [ ] å®ç°setupå‡½æ•°çš„è°ƒç”¨æœºåˆ¶
- [ ] å®ç°Propsç³»ç»Ÿï¼ˆå£°æ˜ã€éªŒè¯ã€å“åº”å¼ï¼‰
- [ ] å®ç°äº‹ä»¶ç³»ç»Ÿï¼ˆemitã€ä¿®é¥°ç¬¦ï¼‰
- [ ] å®ç°æ’æ§½ç³»ç»Ÿï¼ˆé»˜è®¤ã€å…·åã€ä½œç”¨åŸŸï¼‰
- [ ] å®ç°ç”Ÿå‘½å‘¨æœŸé’©å­ç³»ç»Ÿ
- [ ] å¤„ç†ç»„ä»¶çš„å¼‚æ­¥åŠ è½½
- [ ] å®ç°provide/injectæœºåˆ¶
- [ ] å¤„ç†ç»„ä»¶çš„é”™è¯¯è¾¹ç•Œ
- [ ] ç¼–å†™ç»„ä»¶é€šä¿¡çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ”¬ æºç ç ”è¯»é‡ç‚¹

### 1. component.tsä¸­çš„createComponentInstanceå‡½æ•°
```typescript
// æ€è€ƒé—®é¢˜ï¼š
// 1. ç»„ä»¶å®ä¾‹åŒ…å«å“ªäº›æ ¸å¿ƒå±æ€§ï¼Ÿ
// 2. å¦‚ä½•å»ºç«‹ç»„ä»¶é—´çš„çˆ¶å­å…³ç³»ï¼Ÿ
// 3. ç»„ä»¶å®ä¾‹çš„æ¸…ç†æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ
```

### 2. setupComponentå‡½æ•°çš„å®ç°
```typescript
// æ€è€ƒé—®é¢˜ï¼š
// 1. setupå‡½æ•°çš„è°ƒç”¨æ—¶æœºä¸ºä»€ä¹ˆå¦‚æ­¤é‡è¦ï¼Ÿ
// 2. setupä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ
// 3. å¦‚ä½•å¤„ç†setupå‡½æ•°çš„å„ç§è¿”å›å€¼ï¼Ÿ
```

### 3. Propsç³»ç»Ÿçš„å®ç°ç»†èŠ‚
```typescript
// æ€è€ƒé—®é¢˜ï¼š
// 1. Propsæ˜¯å¦‚ä½•å®ç°å“åº”å¼çš„ï¼Ÿ
// 2. å¦‚ä½•åŒºåˆ†propså’Œattrsï¼Ÿ
// 3. PropséªŒè¯æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¿›è¡Œçš„ï¼Ÿ
```

## âœ… å­¦ä¹ æˆæœæ£€éªŒ

å®Œæˆæœ¬é˜¶æ®µå­¦ä¹ åï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š

1. **ç†è®ºç†è§£**
   - [ ] ç†è§£ç»„ä»¶ç³»ç»Ÿçš„æ•´ä½“æ¶æ„
   - [ ] æŒæ¡ç»„ä»¶é€šä¿¡çš„å„ç§æ–¹å¼
   - [ ] ç†è§£ç”Ÿå‘½å‘¨æœŸçš„è®¾è®¡åŸç†

2. **å®è·µèƒ½åŠ›**
   - [ ] ç‹¬ç«‹å®ç°ä¸€ä¸ªå®Œæ•´çš„ç»„ä»¶ç³»ç»Ÿ
   - [ ] å¤„ç†ç»„ä»¶é—´çš„å¤æ‚é€šä¿¡åœºæ™¯
   - [ ] å®ç°é«˜çº§ç»„ä»¶æ¨¡å¼ï¼ˆHOCã€æ¸²æŸ“å‡½æ•°ç­‰ï¼‰

3. **æºç ç†è§£**
   - [ ] èƒ½å¤Ÿé˜…è¯»Vue 3ç»„ä»¶ç›¸å…³æºç 
   - [ ] ç†è§£ç»„ä»¶ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
   - [ ] æŒæ¡ç»„ä»¶ç³»ç»Ÿçš„æ‰©å±•æœºåˆ¶

## ğŸ¯ è¿›é˜¶æ€è€ƒé¢˜

1. ä¸ºä»€ä¹ˆVue 3çš„ç»„ä»¶å®ä¾‹è®¾è®¡æ¯”Vue 2æ›´è½»é‡ï¼Ÿ
2. setupå‡½æ•°ç›¸æ¯”options APIæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
3. Propsçš„å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿä¸ºä»€ä¹ˆPropsæ˜¯åªè¯»çš„ï¼Ÿ
4. äº‹ä»¶ç³»ç»Ÿæ˜¯å¦‚ä½•æ”¯æŒ.onceç­‰ä¿®é¥°ç¬¦çš„ï¼Ÿ
5. æ’æ§½çš„ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ä¼˜åŒ–æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
6. ç”Ÿå‘½å‘¨æœŸé’©å­çš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ

## ğŸ—ï¸ ç»„ä»¶è®¾è®¡æ¨¡å¼

### 1. é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰
```javascript
function withLoading(component) {
  return {
    setup(props, { slots }) {
      const loading = ref(true)
      
      onMounted(() => {
        setTimeout(() => loading.value = false, 1000)
      })
      
      return () => {
        return loading.value 
          ? h('div', 'Loading...') 
          : h(component, props, slots)
      }
    }
  }
}
```

### 2. æ¸²æŸ“å‡½æ•°ç»„ä»¶
```javascript
const MyButton = (props, { slots, emit }) => {
  return h('button', {
    class: ['btn', props.type],
    onClick: () => emit('click')
  }, slots.default())
}
```

### 3. ç»„åˆå¼ç»„ä»¶
```javascript
function useCounter() {
  const count = ref(0)
  const increment = () => count.value++
  const decrement = () => count.value--
  
  return { count, increment, decrement }
}
```

å®Œæˆæœ¬é˜¶æ®µå­¦ä¹ åï¼Œè¯·è¿›å…¥[ç¬¬äº”é˜¶æ®µï¼šé«˜çº§ç‰¹æ€§](./ç¬¬äº”é˜¶æ®µ-é«˜çº§ç‰¹æ€§.md)ï¼
